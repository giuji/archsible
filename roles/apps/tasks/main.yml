---
  
  - name: apps from offical repos
    become: yes
    pacman:
      name: "{{ native_apps }}"
      state: present

  - name: apps from the aur
    become: yes
    become_user: aur_builder
    kewlfft.aur.aur:
      name: "{{ aur_apps }}"
      use: yay
      state: present

  - name: pywal-discord
    lineinfile:
      path: /home/{{ username }}/.config/bspwm/bspwmrc
      line: 'pywal-discord update'
      insertafter: '^#(OPEN)'


  - name: enable udiskie
    block:
      - name: bspwmrc
        lineinfile:
          path: /home/{{ username }}/.config/bspwm/bspwmrc
          line: 'udiskie &'
          insertafter: '^#(OPEN)'
          state: present
      - name: bspwmrc skull
        lineinfile:
          path: /home/{{ username }}/.config/bspwm/bspwmrc
          line: 'killall -q udiskie'
          insertafter: '^#(KILL)'
          state: present
